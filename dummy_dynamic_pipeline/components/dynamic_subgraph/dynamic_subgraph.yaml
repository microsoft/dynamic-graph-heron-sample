$schema: https://azuremlschemas.azureedge.net/development/commandComponent.schema.json
name: dynamic_subgraph
display_name: dynamic_subgraph
description: "A dynamic subgraph that trains model and validates it multiple times\
  \ according to specified input.\n\n    :param input_silos: A file with a list of\
  \ input silos.\n    :param valid_data: Data to validate the model.\n    "
type: command
version: 2
is_deterministic: true
tags:
  codegenBy: mldesigner
inputs:
  input_silos:
    type: uri_file
  valid_data:
    type: uri_file
outputs:
  output_model:
    type: uri_folder
  output_metric:
    type: uri_folder
  condition_output:
    type: boolean
code: ./
environment:
  image: mcr.microsoft.com/azureml/openmpi4.1.0-ubuntu20.04
  conda_file:
    channels:
    - defaults
    dependencies:
    - python=3.9.16
    - pip=21.2.2
    - pip:
      - --extra-index-url=https://pkgs.dev.azure.com/azure-sdk/public/_packaging/azure-sdk-for-python/pypi/simple/
      - azure-ai-ml==1.6.0a20230317001
      - azure-core==1.25.1
      - azure-common==1.1.28
      - azure-identity==1.11.0
      - azure-ml-component==0.9.18.post2
      - azureml-core==1.45.0.post2
      - azureml-mlflow==1.49.0
      - mldesigner==0.1.0b12
      - mlflow==2.1.1
      - mlflow-skinny==2.3.2
      - mltable==1.0.0
      - wheel==0.38.4
command: mldesigner execute --source dynamic_subgraph.py --name dynamic_subgraph --inputs
  input_silos='${{inputs.input_silos}}' valid_data='${{inputs.valid_data}}'
properties:
  azureml.pipelines.dynamic: 'true'
